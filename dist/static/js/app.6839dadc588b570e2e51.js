webpackJsonp([1],{"1Jxe":function(t,e){},"7zck":function(t,e){},GZjg:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),a=s("Dd8w"),o=s.n(a),r=s("NYxO"),i=s("RfEp"),c=s("mtWM"),l=s.n(c);n.default.use(r.a);var u=new r.a.Store({state:{location:{city:"",country:""},previsions:[],weather:{},flickrImg:{},loading:!0,error:null},getters:{weather:function(t){return t.weather},previsions:function(t){return t.previsions},previsionsByDays:function(t){var e=[];return t.previsions.forEach(function(s,n){var a=new Date(s.dt_txt).getDate();if(void 0!=t.previsions[n-1]){var o=new Date(t.previsions[n-1].dt_txt).getDate();void 0!=o&&a!=o&&e.push(s)}}),e},location:function(t){return t.location},flickr:function(t){return t.flickrImg},loading:function(t){return t.loading},error:function(t){return t.error}},mutations:{SET_WEATHER:function(t,e){t.previsions=e,t.weather=e[0]},SET_LOCATION:function(t,e){t.location=e},SET_LOCATION_PIX:function(t,e){t.flickrImg=e},SET_LOADING:function(t,e){t.loading=e},SET_ERROR:function(t,e){t.error=e}},actions:{setLoading:function(t,e){t.commit("SET_LOADING",e)},loadWeather:function(t,e){t.commit("SET_LOADING",!0);var s="";s=void 0!=e.lat&&void 0!=e.long?"lat="+e.lat+"&lon="+e.long:"q="+e,l.a.get("https://api.openweathermap.org/data/2.5/forecast?"+s+"&APPID=a9d7a05fe78144cb7f7113e1416e7886&units=metric").then(function(e){console.log("success Weather API",e.data),t.commit("SET_LOCATION",e.data.city),t.commit("SET_WEATHER",e.data.list),t.commit("SET_LOADING",!1),t.commit("SET_ERROR",null),l.a.get("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=385faf93e749d1b36c63a91d1245a3f2&media=photos&content_type=1&privacy_filter=1&tags=landscape&radius=32&lat="+e.data.city.coord.lat+"&lon="+e.data.city.coord.lon+"&per_page=1&page=1&accuracy=11&content_type=1&sort=relevance&format=json&nojsoncallback=1").then(function(e){console.log("success Flickr API",e.data),t.commit("SET_LOCATION_PIX",e.data.photos.photo[0])}).catch(function(t){console.log("error",t)})}).catch(function(e){console.log(e),t.commit("SET_LOADING",!1),t.commit("SET_ERROR",404)})}}}),d={name:"App",store:u,data:function(){return{drawer:!1,date:new Date,dialog:!1,geohash:{},manualSearch:"",geoLocation:!1}},components:{navigation:i.default},mounted:function(){this.initLocation()},methods:{manualSearchLocation:function(){this.$store.dispatch("loadWeather",this.manualSearch),this.dialog=!1,this.manualSearch="","error"==this.$route.name&&this.$router.push("/")},initLocation:function(){var t=this;navigator.geolocation?(this.geoLocation=!0,navigator.geolocation.getCurrentPosition(function(e){t.geohash={lat:e.coords.latitude,long:e.coords.longitude,precision:t.precision},"error"==t.$route.name&&t.$router.push("/"),t.$store.dispatch("setLoading",!0),t.$store.dispatch("loadWeather",t.geohash)},function(e){console.log("GEOLOCATION ERR",e),t.$store.dispatch("setLoading",!1),t.$router.push("/error/no-geo")})):(console.error("Cannot access geolocation"),this.$store.dispatch("setLoading",!1),this.$router.push("/error/no-geo"))}},computed:o()({},Object(r.b)(["loading","location","error"]),{year:function(){return this.date.getFullYear()},period:function(){var t=this.date.getHours();return t>5&&t<18?"app--day":"app--night"}}),watch:{error:function(t,e){404==t&&this.$router.push("/error/no-data")}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{class:t.period,attrs:{id:"app"}},[s("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("navigation")],1),t._v(" "),s("v-toolbar",{attrs:{app:"",flat:"",dark:"",absolute:"",color:"transparent"}},[s("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),s("v-toolbar-title",[t.location?s("h1",[t._v(t._s(t.location.name)+", "+t._s(t.location.country))]):t._e()]),t._v(" "),s("v-spacer"),t._v(" "),s("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[s("v-icon",[t._v("search")])],1),t._v(" "),s("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return e.stopPropagation(),t.initLocation()}}},[s("v-icon",[t._v("my_location")])],1)],1),t._v(" "),s("v-content",[t.loading?s("v-progress-circular",{attrs:{size:70,width:7,indeterminate:""}}):s("router-view")],1),t._v(" "),s("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("Choose your location...")]),t._v(" "),s("v-card-text",[s("v-text-field",{attrs:{id:"testing",label:"Location"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.manualSearchLocation()}},model:{value:t.manualSearch,callback:function(e){t.manualSearch=e},expression:"manualSearch"}})],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(e){return t.manualSearchLocation()}}},[t._v("Search")])],1)],1)],1)],1)},staticRenderFns:[]};var h=s("VU/8")(d,v,!1,function(t){s("njYt")},null,null).exports,p=s("/ocq"),f={KelvToCelcius:{bind:function(t,e,s){t.innerHTML=Math.round(e.value-273.15)+"°C"}},round:{bind:function(t,e,s){t.innerHTML=Math.round(e.value)},update:function(t,e,s){t.innerHTML=Math.round(e.value)}},lazyimg:{bind:function(t,e){},update:function(t,e){!function(t,e){var s=new Image;s.onload=function(){t.style.backgroundImage="url("+e+")"},s.src=e}(t,e.value)},unbind:function(t){}},getDayFromDate:{bind:function(t,e,s){var n="";switch(new Date(e.value).getDay()){case 0:n="Sunday";break;case 1:n="Monday";break;case 2:n="Tuesday";break;case 3:n="Wednesday";break;case 4:n="Thursday";break;case 5:n="Friday";break;case 6:n="Saturday"}t.innerHTML=n}}},m={name:"Previsions",props:["data"],directives:f,data:function(){return{}}},j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"previsions"},[s("ul",t._l(t.data,function(e){return s("li",[s("v-layout",[s("v-flex",{staticClass:"label",attrs:{xs9:""}},[s("i",{class:"icon wi wi-owm-"+e.weather[0].id}),t._v(" "),s("span",{directives:[{name:"getDayFromDate",rawName:"v-getDayFromDate",value:e.dt_txt,expression:"p.dt_txt"}]})]),t._v(" "),s("v-flex",{staticClass:"temp",attrs:{xs3:""}},[s("span",{directives:[{name:"round",rawName:"v-round",value:e.main.temp,expression:"p.main.temp"}]}),t._v("°\n          ")])],1)],1)}),0)])},staticRenderFns:[]};var g=s("VU/8")(m,j,!1,function(t){s("QwfM")},null,null).exports,_={name:"PrevisionsCharts",props:["data","options"],extends:s("UlOv").a,data:function(){return{}},mounted:function(){var t=[],e=[];this.data.forEach(function(s){t.push(s.main.humidity),e.push(new Date(s.dt_txt).getDay())}),this.renderChart({labels:e,datasets:[{label:"Humidity",data:t,fill:0,borderColor:"#000",pointBackgroundColor:"#000",pointBorderColor:"#000",backgroundColor:"#000"}]},this.options)}};var y={name:"HelloWorld",store:u,components:{Previsions:g,PrevisionsCharts:s("VU/8")(_,null,!1,function(t){s("1Jxe")},null,null).exports},directives:f,data:function(){return{typeOfView:"list"}},methods:{getFlickImg:function(){return"https://farm"+this.flickr.farm+".staticflickr.com/"+this.flickr.server+"/"+this.flickr.id+"_"+this.flickr.secret+".jpg"},changeTypeOfView:function(){"list"==this.typeOfView?this.typeOfView="charts":this.typeOfView="list"}},computed:o()({},Object(r.b)(["weather","location","previsionsByDays","previsions","flickr"]))},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"hello"},[t.weather.main?s("header",{directives:[{name:"lazyimg",rawName:"v-lazyimg",value:t.getFlickImg(),expression:"getFlickImg()"}],staticClass:"currentWeather"},[s("v-layout",{staticClass:"hero"},[s("v-flex",{attrs:{xs8:""}},[s("div",{staticClass:"hero--temp"},[s("span",{directives:[{name:"round",rawName:"v-round",value:t.weather.main.temp,expression:"weather.main.temp"}]}),t._v("°\n        ")]),t._v(" "),s("div",{staticClass:"hero--description"},[s("p",["d"==t.weather.sys.pod?s("i",{class:"wi wi-owm-day-"+t.weather.weather[0].id}):t._e(),t._v(" "),"n"==t.weather.sys.pod?s("i",{class:"wi wi-owm-night-"+t.weather.weather[0].id}):t._e(),t._v("\n            "+t._s(t.weather.weather[0].description)+"\n          ")]),t._v(" "),s("p",[s("i",{staticClass:"wi wi-strong-wind"}),t._v(" "+t._s(t.weather.wind.speed)+" m/s")]),t._v(" "),s("p",[s("i",{staticClass:"wi wi-humidity"}),s("span",[t._v(" "+t._s(t.weather.main.humidity)+"%")])])])]),t._v(" "),s("v-flex",{attrs:{xs4:""}})],1)],1):t._e(),t._v(" "),s("section",{staticClass:"weatherSum"},[s("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",color:"pink"},on:{click:t.changeTypeOfView}},["list"==t.typeOfView?s("v-icon",[t._v("show_chart")]):s("v-icon",[t._v("format_list_bulleted")])],1),t._v(" "),"charts"==t.typeOfView?s("PrevisionsCharts",{staticStyle:{"margin-bottom":"25px"},attrs:{data:t.previsionsByDays,options:{legend:{labels:{fontColor:"#000"}},responsive:!0,maintainAspectRatio:!0,scales:{yAxes:[{ticks:{beginAtZero:!0,fontColor:"#000"}}],xAxes:[{ticks:{fontColor:"#000"}}]}},width:400,height:300}}):t._e(),t._v(" "),"list"==t.typeOfView?s("Previsions",{attrs:{data:t.previsionsByDays}}):t._e()],1)])},staticRenderFns:[]};var k=s("VU/8")(y,w,!1,function(t){s("GZjg")},null,null).exports,b={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"errorPage"},[s("header",{staticClass:"header"},["no-geo"===t.errorType?s("h1",[s("v-icon",[t._v("location_off")]),t._v(" "),s("span",[t._v("NO GPS DATA...")])],1):t._e(),t._v(" "),"no-data"===t.errorType?s("h1",[s("v-icon",[t._v("sentiment_very_dissatisfied")]),t._v(" "),s("span",[t._v("NO RESULTS, LOCATION NOT FOUND...")])],1):t._e()]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"errorMessage"},[e("p",[this._v("You can also use the search option ! ")])])}]};var O=s("VU/8")({name:"ErrorPage",data:function(){return{errorType:""}},mounted:function(){this.errorType=this.$route.params.type}},b,!1,function(t){s("baHc")},"data-v-e00f172e",null).exports;n.default.use(p.a);var E=new p.a({routes:[{path:"/",name:"HelloWorld",component:k},{path:"/error/:type*",name:"error",component:O}]}),x=s("3EgV"),z=s.n(x);s("7zck");n.default.use(z.a),n.default.use(r.a),n.default.config.productionTip=!1,s("keRe"),new n.default({el:"#app",router:E,components:{App:h},template:"<App/>"})},QwfM:function(t,e){},RfEp:function(t,e,s){"use strict";var n=s("yj81"),a=s.n(n),o=s("tpJK"),r=s("VU/8")(a.a,o.a,!1,null,null,null);e.default=r.exports},baHc:function(t,e){},keRe:function(t,e){},njYt:function(t,e){},tpJK:function(t,e,s){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-list",[e("v-list-tile",[e("v-list-tile-action",[e("v-icon",[this._v("folder")])],1),this._v(" "),e("v-list-tile-content",[e("v-list-tile-title",[e("a",{attrs:{href:"https://github.com/Websylvain/progressive-weather-app",target:"_blank"}},[this._v("GITHUB REPO")])])],1)],1),this._v(" "),e("v-list-tile",[e("v-list-tile-action",[e("v-icon",[this._v("computer")])],1),this._v(" "),e("v-list-tile-content",[e("v-list-tile-title",[e("a",{attrs:{href:"https://www.websylvain.com",target:"_blank"}},[this._v("DEVELOPER WEBSITE")])])],1)],1)],1)},staticRenderFns:[]};e.a=n},uslO:function(t,e,s){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-ps":"zWlr","./ar-ps.js":"zWlr","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn-bd":"1C9R","./bn-bd.js":"1C9R","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-mx":"USNP","./es-mx.js":"USNP","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku-kmr":"2ukb","./ku-kmr.js":"2ukb","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function a(t){return s(o(t))}function o(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(n)},a.resolve=o,t.exports=a,a.id="uslO"},yj81:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.6839dadc588b570e2e51.js.map